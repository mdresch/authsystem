## Troubleshooting

If you encounter issues while using the application, refer to the following common errors and their solutions:

### 1. "requestPasswordReset is not a function" Error
- **Restart the Development Server**: Ensure you have restarted your development server after installing dependencies and modifying `next.config.js`.
- **Check Import Statement**: Verify that you are importing `requestPasswordReset` correctly from `@/app/actions`.
- **Clear Cache**: Clear your Next.js cache by deleting the `.next` folder and restarting the server.

### 2. "Your project's URL and Key are required..." Error
- **Create `.env.local` File**: Ensure you have created a `.env.local` file in the root of your project.
- **Verify Environment Variables**: Double-check that you have added the following variables to your `.env.local` file with the correct values from your Supabase project dashboard:
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY`
- **Check Usage in Code**: Make sure you are using the `SUPABASE_SERVICE_ROLE_KEY` in your `createSupabaseServerClient` function.
- **Restart Server**: Restart your development server after making any changes to environment variables.

### 3. "Cannot destructure property 'req' of 'context' as it is undefined"
- **Use Cookies Helper**: Ensure your `createSupabaseServerClient` function uses the `cookies()` helper from `next/headers` and does *not* expect a `context` object.
- **Check Function Call**: Verify that you are calling `createSupabaseServerClient` without any arguments in your Server Actions.

### 4. Password Reset Link Doesn't Work / I Don't See the Reset Form
- **Inspect Network Requests**: Check your browser's developer tools (Network tab) to see the requests being made. Verify that the redirects are happening correctly.
- **Debug with Console Logs**: Add `console.log` statements to your `auth/callback/route.ts` file to track the flow and the values of `code` and `redirect_to`.
- **Check Query Parameters**: Add `console.log` statements to the `useEffect` hook in `auth/reset-password/page.tsx` to check if the `reset=true` query parameter is being detected.

### 5. Other Issues
- **Consult Documentation**: For additional guidance, consult the [Supabase documentation](https://supabase.com/docs).
- **Search for Solutions**: Search for similar issues on Stack Overflow or the Supabase GitHub Discussions.
- **Provide Detailed Information**: If you're still stuck, provide detailed information about the error, including the steps to reproduce it and any relevant code snippets when asking for help.

By following these troubleshooting steps, you can resolve common issues and ensure a smoother experience with the application.
